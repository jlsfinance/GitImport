‡§§‡•Å‡§ù‡•á ‡§∏‡•Ä‡§ß‡•á ‡§î‡§∞ ‡§∏‡§æ‡§´ ‡§¨‡§§‡§æ‡§§‡§æ ‡§π‡•Ç‡§Å‚Äî‡§Ö‡§ó‡§∞ ‡§§‡•Ç ‡§Ö‡§™‡§®‡•á billing app ‡§Æ‡•á‡§Ç GST ‡§≤‡§ó‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡§æ ‡§π‡•à, ‡§§‡•ã ‡§Ü‡§ß‡§æ-‡§Ö‡§ß‡•Ç‡§∞‡§æ logic ‡§Æ‡§§ ‡§°‡§æ‡§≤‡•§ GST toggle ON ‡§π‡•ã‡§§‡•á ‡§π‡•Ä ‡§™‡•Ç‡§∞‡•Ä tax-driven workflow ‡§¨‡§¶‡§≤ ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à, ‡§î‡§∞ OFF ‡§π‡•ã‡§§‡•á ‡§π‡•Ä ‡§∏‡§¨ vanish ‡§π‡•ã‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è‡•§ ‡§®‡•Ä‡§ö‡•á ‡§™‡•Ç‡§∞‡§æ ‡§ó‡§Ç‡§≠‡•Ä‡§∞, production-ready prompt/feature-spec ‡§¶‡•á ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å ‚Äî CGST, SGST, IGST ‡§∏‡§¨ ‡§∂‡§æ‡§Æ‡§ø‡§≤‡•§

‚∏ª

üî• Complete GST System Specification for a Billing App

1. Master GST Toggle (Global Setting)

Problem: ‡§ï‡§à apps GST ‡§ï‡•ã cosmetic feature ‡§ï‡•Ä ‡§§‡§∞‡§π ‡§ú‡•ã‡§°‡§º‡§§‡•á ‡§π‡•à‡§Ç ‚Äì ‡§ó‡§≤‡§§‡•§
Fix: ‡§è‡§ï Global Boolean Flag ‡§¨‡§®‡§æ‡§ì:

GST_ENABLED = true/false

Behavior:
	‚Ä¢	GST_ENABLED = true:
	‚Ä¢	‡§∏‡§≠‡•Ä GST fields ‡§¶‡§ø‡§ñ‡§æ‡§à ‡§¶‡•á‡§Ç (CGST/SGST/IGST rates, HSN/SAC, GSTIN input, GST summary section).
	‚Ä¢	Invoice template automatically GST-compliant ‡§¨‡§® ‡§ú‡§æ‡§è.
	‚Ä¢	Tax splitting logic active ‡§π‡•ã.
	‚Ä¢	GST_ENABLED = false:
	‚Ä¢	‡§∏‡§æ‡§∞‡•á GST fields ‡§î‡§∞ UI elements ‡§™‡•Ç‡§∞‡•Ä ‡§§‡§∞‡§π hidden ‡§π‡•ã‡§Ç, disabled ‡§®‡§π‡•Ä‡§Ç‚Äîhidden‡•§
	‚Ä¢	Backend invoice model ‡§∏‡•á ‡§≠‡•Ä tax fields nullify ‡§π‡•ã ‡§ú‡§æ‡§è‡§Å‡•§
	‚Ä¢	App pure ‚Äúnon-GST simple billing‚Äù mode ‡§Æ‡•á‡§Ç ‡§ö‡§≤‡§æ ‡§ú‡§æ‡§è‡•§

‚∏ª

2. Tax Type Auto-Selection Logic (CGST+SGST vs IGST)

Algorithm (Mandatory)

IF supplier_state == customer_state:
        tax_type = "INTRA_STATE"
        apply CGST + SGST
ELSE:
        tax_type = "INTER_STATE"
        apply IGST

Output:
	‚Ä¢	Same‚Äìstate billing ‚Üí CGST + SGST
	‚Ä¢	Different‚Äìstate billing ‚Üí IGST

‡§Ø‡§π basic ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à, ‡§Ø‡§π mandatory rule ‡§π‡•à‡•§ ‡§ó‡§≤‡§§ ‡§ï‡§∞‡§®‡•á ‡§™‡§∞ invoice illegal ‡§π‡•ã ‡§ú‡§æ‡§è‡§ó‡§æ‡•§

‚∏ª

3. GST Rate Handling (Product/Service Level)

‡§π‡§∞ product/service master ‡§Æ‡•á‡§Ç ‡§Ø‡•á fields ‡§π‡•ã‡§®‡•á ‡§ö‡§æ‡§π‡§ø‡§è:

HSN/SAC Code
Tax Rate (%) ‚Äì single field (system splits automatically)

‡§ó‡§≤‡§§‡•Ä: ‡§ï‡§à apps ‡§Ö‡§≤‡§ó-‡§Ö‡§≤‡§ó rate fields ‡§¨‡§®‡§æ‡§§‡•á ‡§π‡•à‡§Ç (CGST rate, SGST rate).
Fix: Rate ‡§∏‡§ø‡§∞‡•ç‡§´ ‡§è‡§ï ‡§π‡•Ä ‡§∞‡§ñ‡§®‡§æ:

gst_rate = 5 / 12 / 18 / 28

System ‡§ñ‡•Å‡§¶ split ‡§ï‡§∞‡•á:

CGST = gst_rate / 2
SGST = gst_rate / 2
IGST = gst_rate


‚∏ª

4. Line Item Calculation (Correct Formulas)

A. Intra-State (CGST + SGST)

base_amount = qty * price
cgst_amount = base_amount * (gst_rate/2) / 100
sgst_amount = base_amount * (gst_rate/2) / 100
total = base_amount + cgst_amount + sgst_amount

B. Inter-State (IGST)

base_amount = qty * price
igst_amount = base_amount * gst_rate / 100
total = base_amount + igst_amount


‚∏ª

5. Invoice Model (Backend Structure)

invoice_id
date
customer_name
customer_gstin
customer_state
supplier_gstin
supplier_state
items: [
    {
        name
        hsn
        qty
        price
        gst_rate
        base_amount
        cgst_amount (nullable)
        sgst_amount (nullable)
        igst_amount (nullable)
        total
    }
]
invoice_totals:
    subtotal
    total_cgst
    total_sgst
    total_igst
    grand_total
gst_enabled (boolean)


‚∏ª

6. GST OFF Mode (Clean Disable Logic)

GST ‡§¨‡§Ç‡§¶ ‡§π‡•ã‡§§‡•á ‡§π‡•Ä:
	‚Ä¢	HSN/SAC hide
	‚Ä¢	GSTIN fields hide
	‚Ä¢	Tax columns hide
	‚Ä¢	Tax totals hide
	‚Ä¢	Invoice numbering normal (not GST compliant)
	‚Ä¢	‡§ï‡•ã‡§à split calculation ‡§®‡§π‡•Ä‡§Ç

Invoice model ‡§Æ‡•á‡§Ç sgst/cgst/igst ‡§π‡§Æ‡•á‡§∂‡§æ null return ‡§π‡•ã‡§Ç‡•§

‚∏ª

7. Invoice Format Requirements

‡§Ö‡§ó‡§∞ GST ON ‡§π‡•à, invoice ‡§Æ‡•á‡§Ç ‡§Ø‡•á sections ‡§Ö‡§®‡§ø‡§µ‡§æ‡§∞‡•ç‡§Ø ‡§π‡•à‡§Ç:
	‚Ä¢	Supplier GSTIN
	‚Ä¢	Customer GSTIN
	‚Ä¢	HSN Summary
	‚Ä¢	Tax Summary:
	‚Ä¢	CGST Rate / Amount
	‚Ä¢	SGST Rate / Amount
	‚Ä¢	IGST Rate / Amount
	‚Ä¢	Grand Total (tax-inclusive)

‚∏ª

8. Final Developer-Ready Prompt (Copy‚ÄìPaste Ready)

‡§®‡•Ä‡§ö‡•á ‡§µ‡§π ‡§∏‡§æ‡§´-‡§∏‡•Å‡§•‡§∞‡§æ prompt ‡§π‡•à ‡§ú‡•ã ‡§§‡•Ç directly ‡§Ö‡§™‡§®‡•á dev ‡§ï‡•ã ‡§¶‡•á ‡§∏‡§ï‡§§‡§æ ‡§π‡•à:

‚∏ª

‚úÖ Developer Prompt

Implement a full GST system in the billing app with a global toggle GST_ENABLED. 
When GST_ENABLED = true, show all GST fields (HSN/SAC, GSTIN, GST rate, CGST/SGST/IGST calculations, GST summary). 
When GST_ENABLED = false, completely hide all GST-related UI and set all tax fields to null.

Auto-detect tax type:
If supplier_state == customer_state ‚Üí apply CGST + SGST
Else ‚Üí apply IGST.

Store only a single GST rate per product and split automatically:
CGST = rate/2, SGST = rate/2, IGST = rate.

Correct line-item calculations must be used. 
Invoice must include GSTINs, HSN codes, tax breakup, and GST totals when GST is ON. 
When GST is OFF, invoice becomes a simple non-GST invoice with zero tax fields.


‚∏ª

‡§Ö‡§ó‡§∞ ‡§§‡•Ç ‡§ö‡§æ‡§π‡•á ‡§§‡•ã ‡§Æ‡•à‡§Ç ‡§™‡•Ç‡§∞‡§æ UI mockup, database schema, API endpoints, ‡§Ø‡§æ React/Flutter code ‡§≠‡•Ä ‡§≤‡§ø‡§ñ ‡§¶‡•Ç‡§Å‡•§